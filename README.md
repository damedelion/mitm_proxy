# MITM Proxy

HTTP/HTTPS прокси-сервер с поддержкой перехвата трафика

## Запуск

### 1. Подготовка (перед запуском контейнера)

```bash
git clone https://github.com/damedelion/mitm_proxy.git
cd mitm_proxy
./gen_ca.sh  # Генерирует корневой сертификат (ca.crt)
```

### 2. Установка корневого сертификата

Установите `ca.crt` в доверенные хранилища вашей ОС:

- **Ubuntu/Debian**:
  ```bash
  sudo cp ca.crt /usr/local/share/ca-certificates/
  sudo update-ca-certificates
  ```

- **Windows**:  
  Импортируйте через "Доверенные корневые центры сертификации"

- **MacOS**:  
  Используйте Keychain Access

### 3. Запуск Docker

```bash
docker build -t damedelion/mitm_proxy .
docker run -d -p 8080:8080 damedelion/mitm_proxy
```

## Функционал

### Поддерживаемые возможности:
- **Полное проксирование HTTP-трафика**:
  - Обработка всех методов (GET, POST, PUT, DELETE и др.)
  - Поддержка всех кодов ответов (200, 301, 404 и др.)
  - Модификация заголовков запросов

- **Прозрачное HTTPS-проксирование**:
  - Поддержка CONNECT-метода
  - Генерация сертификатов на лету
  - Совместимость с TLS 1.2/1.3

- **Работа с различными клиентами**:
  - Поддержка браузеров (Chrome, Firefox и др.)
  - Работа с curl и другими HTTP-клиентами
  - Совместимость с мобильными приложениями

## Использование

### Настройка прокси
Укажите в системе или браузере:
- Адрес: `127.0.0.1`
- Порт: `8080`
- Тип: HTTP/HTTPS прокси

### Проверка работы

**HTTP-запросы**:
```bash
curl -x http://localhost:8080 http://mail.ru
```

**HTTPS-запросы**:
```bash
curl -x http://localhost:8080 https://mail.ru --cacert ca.crt
```

**В браузере**:  
После настройки прокси и установки сертификата все сайты будут работать через прокси.